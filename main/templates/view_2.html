<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View 2</title>
    <script>
        // Function to generate or retrieve a unique TabId for the current tab
        function getTabId() {
            // Check if a TabId already exists in session storage
            let tabId = sessionStorage.getItem('tabId');
            
            if (!tabId) {
                // Generate a new TabId if it doesn't exist
                tabId = 'tab_' + Math.random().toString(36).substr(2, 9);
                sessionStorage.setItem('tabId', tabId);
            }
            
            return tabId;
        }
    
        // Function to add TabId to the form
        function addTabIdToForm() {
            const form = document.querySelector('form'); // Select the form element
            const input = document.createElement('input'); // Create a new hidden input element
            input.type = 'hidden'; // Set input type to hidden
            input.name = 'tab_id'; // Set the name attribute
            input.value = getTabId(); // Set the value attribute to the TabId
            form.appendChild(input); // Append the hidden input to the form
        }
    
        // Add TabId to the form on page load
        document.addEventListener('DOMContentLoaded', addTabIdToForm);
    </script>
</head>
<body>
    <h1>View 2</h1>
    <form method="post" action="{% url 'view_3' %}" onsubmit="addTabIdToForm(this);">
        {% csrf_token %}
        <button type="submit">Go to View 3</button>
    </form>
</body>
</html>
